---
title: Gender birth rate trend analysis \newline in the United States\huge
author:
- familyname: Baruah
  othernames: Arindam
  qualifications: abar0090@student.monash.edu (32779267)

email: 
phone: 
department: Department of\newline Econometrics &\newline Business Statistics
organization: ETC 5242 Task 1
bibliography: references.bib
biblio-style: authoryear-comp
linestretch: 1.5
output:
  monash::report:
    fig_caption: yes
    fig_height: 5
    fig_width: 8
    includes:
      in_header: preamble.tex
    keep_tex: yes
    number_sections: yes
    citation_package: biblatex
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, cache=TRUE, message=FALSE, warning=FALSE)
```

```{r libraries}

library(ggplot2)
library(knitr)
library(tidyverse)
library(ggthemes)
library(kableExtra)
library(here)
library(rmarkdown)
library(knitr)
library(readr)
library(dplyr)
library(sf)
library(ggrepel)
library(stringr)
library(scales)
library(cowplot)
```


```{r read-data}
df_present <- read_csv("data/present.csv")
df_arb <- read_csv("data/arbuthnot.csv")
```

# Introduction

The current study delineates a detailed analysis of the birth counts for boys and girls born in the country of The United States of America. The study is based on two separate datasets, the first of which contain gender wise birth data from the years of __1629 to 1710__ and the second, containing the gender birth data from the years of __1940 to 2002__. Utilisation of statistical techniques and subsequent feature engineering of the current and the historical data would further provide key insights into the changes of gender birth rate in the aforementioned country of interest. While the studies of @mathews2005trend and @owidgenderratio have uncovered change of birth rates as a result of various socio-economic causes such as demographic changes, __the current study would however be limited to exploring the key changes in the number of births for girls and boys using statistical methods and feature engineering.__

It is critical to acknowledge that while the study by @pryzgoda2000definitions defines the terminologies of "Sex ratio" and "Gender ratio" as two different statistics, however for the sake of simplicity, these terms may be used interchangeably in the context of the current study.

# Research Questions {#label1}

In this section of the study, the following key research questions pertaining to the new births in The United States will be formulated and further analysed in section \ref{label2} :

1. __How do the datasets belonging to the periods of 1629-1710 and 1940-2002 differ from one another__ ? 
2. __How has the birth rate for girls changed over the period of 1940-2002__ ? 
3. __Are there any similarities in the birth rate of girls between the time periods of 1629-1710 and 1940-2002__ ?
4. __Would creating new statistical features allow us to gain better insights into the data__ ?
5. __Are boys born in greater proportion to girls during the period of 1940-2002__ ?

# Analysis {#label2}

The current section will provide a step by step analysis for each of the formulated research questions of section \ref{label1}.

## Query 1

A basic understanding on the size of the data and the number of entries for the datasets belonging to each of the two time periods will be explored in this section.

```{r echo=TRUE,include=TRUE}
head(df_present)
```

The above code-chunk and its output provides us with the glimpse of the dataset. The dataset contains three features. These features are explained as below:

- __Year__ : The year pertaining to the count of new births in the United States.
- __boys__ : The number of births classified as "boys" for the corresponding year.
- __girls__ : The number of births classified as "girls" for the corresponding year.

Let us observe how do the values of the number of births between the periods of 1629-1710 and 1940-2002 vary from one another.

\scriptsize
```{r echo=TRUE,include=TRUE}
summary(df_present)
summary(df_arb)
```
\normalsize

As we can clearly observe, the __magnitude of the boys and girls born during the period of 1940-2002 are much larger than that for the period of 1629-1710__. This is expected as a result of the global rise of population owing to factors such as better infrastructure, better lifestyle, better socio-economic factors and  improvement in medical sciences.

Let us try to visualise the same through figure \ref{fig:figbirth}.

\scriptsize
```{r figbirth,fig.cap="Number of births in The United States of America",fig.align='center',echo=TRUE,include=TRUE}

options(scipen = 999) # To remove scientific notation

df_arb_long <-
  pivot_longer(
    df_arb,
    names_to = "gender",
    values_to = "born",
    cols = c(boys, girls)
  )
pl1 <-
  ggplot(data = df_arb_long, aes(x = year, y = born, fill = gender)) + 
  geom_area(color = 'black') + theme_classic() + 
  ggtitle("Birth statistics between 1629-1710 \n in The US") + 
  theme(plot.title = element_text(hjust = 0.5),aspect.ratio = 0.5) + 
  labs(fill = "Gender", x = "Year", y = "Number of births")


df_present_long <-
  pivot_longer(
    df_present,
    names_to = "gender",
    values_to = "born",
    cols = c(boys, girls)
  )
pl2 <-
  ggplot(data = df_present_long, aes(x = year, y = born, fill = gender)) + 
  geom_area(color = 'black') + 
  theme_classic() + 
  ggtitle("Birth statistics between 1940-2002 \n in The US") + 
  theme(plot.title = element_text(hjust = 0.5),aspect.ratio = 0.5) + 
  labs(fill = "Gender", x = "Year", y = "Number of births")

plot_grid(pl1, pl2, labels = "AUTO", ncol = 1)
```

\normalsize

As we can observe through figure \ref{fig:figbirth}, the magnitude of births are observed to be __significantly higher during the period between 1940-2002__ when compared to the period between 1620-1710.

## Query 2

In this section, the number of births classified as "girls" will be focused on to gain further insights through a scatter plot as visualised through figure \ref{fig:girlbirth}.

\tiny
```{r girlbirth,fig.cap="Girls born during each period in the US",fig.align='center',echo=TRUE,include=TRUE}
pl3 <- ggplot(data = df_present, aes(x = year, y = girls)) +
  geom_point(shape = 2, color = 'red') + theme_classic() + 
  ggtitle("Number of girls born during 1940-2002 \n in the US") + 
  theme(plot.title = element_text(hjust = 0.5), aspect.ratio = 0.5) + labs(x = "Year", 
                                                                           y = "Number of births")
pl4 <- ggplot(data = df_arb, aes(x = year, y = girls)) +
  geom_point(shape = 2, color = 'blue') + theme_classic() + 
  ggtitle("Number of girls born during 1629-1710 \n in the US") + 
  theme(plot.title = element_text(hjust = 0.5), aspect.ratio = 0.5) + labs(x = "Year", 
                                                                           y = "Number of births")
plot_grid(pl3,pl4,ncol =1)
```
\normalsize
## Query 3

Based on the analysis of figures \ref{fig:girlbirth} and \ref{fig:pres}, we can observe the following key points:

1. The magnitude of girls born in the period between 1940-2002 is __significantly higher__ than in the period between 1629-1710.
2. During the period between 1940-1960, there was __a consistent increase in the number of girls born in the country__.
3. The period between 1960-1975 observed a __sudden drop in the number of girls born__.
4. However, the number of girls born were __back on the rise__ after the year 1975.
5. Between the period of 1990-2000, the __number of girls born were observed to stagnate at approximately 2000000 births a year__.

\tiny
```{r pres,fig.cap="Trend analysis of girls child births in The United States during 1940-2002",fig.align='left',echo=TRUE,include=TRUE}

pl5 <- ggplot(data = df_present, aes(x = year, y = girls)) +
  geom_point(shape = 2, color = 'red') + theme_classic() + 
  ggtitle("Number of girls born during 1940-2002 \n in the US") +
   labs(x = "Year", y = "Number of births") + theme(plot.title = element_text(hjust = 0.5), 
                                                    aspect.ratio = 0.7) +
  annotate(
    "segment",
    x = 1945,
    y = 1900000,
    xend = 1950  ,
    yend = 1800000,
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 1946,
    y = 1980000,
    colour = "black",
    label = 'Consistent rise in number of girls \n born between 1940-1960',
    size = unit(2.5, "pt")
  ) +
  annotate(
    "segment",
    x = 1965,
    y = 1300000,
    xend = 1973  ,
    yend = 1500000,
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 1965,
    y = 1250000,
    colour = "blue",
    label = 'Dip in number of girls born \n between 1960-1975',
    size = unit(2.5, "pt")
  ) +
  annotate(
    "segment",
    x = 1983,
    y = 1500000,
    xend = 1985  ,
    yend = 1700000,
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 1985,
    y = 1450000,
    colour = "darkgreen",
    label = 'Girl child births start \n increasing again',
    size = unit(2.5, "pt")
  ) +
    annotate(
    "segment",
    x = 1995,
    y = 1700000,
    xend = 1995  ,
    yend = 1850000,
    arrow = arrow(type = "closed",
                  length = unit(0.02, "npc"))
  ) +
  annotate(
    "text",
    x = 1995,
    y = 1600000,
    colour = "darkred",
    label = 'Stagnation in the number \n of girls born after 1990',
    size = unit(2.5, "pt")
  )  
pl5

```




